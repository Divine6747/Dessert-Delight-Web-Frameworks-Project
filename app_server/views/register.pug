doctype html
html
  head
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title Register Page
    link(rel='stylesheet', href='https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css')
    link(rel='stylesheet', href='https://use.fontawesome.com/releases/v5.3.1/css/all.css')
    link(rel='stylesheet', type='text/css', href='/stylesheets/style.css')

  body.register-page
    .register-card.card
      .register-card-header.card-header
        h3.register-title Register

      .register-card-body.card-body
        if error && error.length > 0
          .alert.alert-danger(role="alert")= error
        
        form.register-form(method='POST', action='/register')
          .register-input-group.input-group
            .register-input-prepend.input-group-prepend
              span.register-input-text.input-group-text
                i.fas.fa-user
            input.register-input.form-control(type='text', placeholder='Username', name='username', required, minlength="5")

          .register-input-group.input-group
            .register-input-prepend.input-group-prepend
              span.register-input-text.input-group-text
                i.fas.fa-key
            input.register-input.form-control(type='password', placeholder='Password', name='password', required, minlength="7")

          .register-input-group.input-group
            .register-input-prepend.input-group-prepend
              span.register-input-text.input-group-text
                i.fas.fa-key
            input.register-input.form-control(type='password', placeholder='Confirm Password', name='confirmPassword', required)

          input.register-btn.btn(type='submit', value='Sign Up')

      .register-card-footer.card-footer
        .register-links
          | Already have an account?
          a(href='/login') Login

script.
  document.querySelector('.register-form').addEventListener('submit', function(e) {
    const username = document.querySelector('input[name="username"]').value.trim();
    const password = document.querySelector('input[name="password"]').value;
    const confirmPassword = document.querySelector('input[name="confirmPassword"]').value;
    
    const errors = [];
    
    if (!username || !password || !confirmPassword) {
      errors.push("Please fill in all fields.");
    }
    
    if (username.length < 5) {
      errors.push("Username must be at least 5 characters.");
    }
    
    if (password.length < 7) {
      errors.push("Password must be at least 7 characters.");
    }
    
    if (password !== confirmPassword) {
      errors.push("Passwords do not match.");
    }
    
    if (errors.length > 0) {
      e.preventDefault();
      
      let userError = '<div class="alert alert-danger" role="alert">';
      userError += '<h5>Please fix the following errors:</h5><ul>';
      errors.forEach(error => {
        userError += `<li>${error}</li>`;
      });
      userError += '</ul></div>';
      
      const existingError = document.querySelector('.form-errors');
      if (existingError) {
        existingError.remove();
      }
      
      const errorDiv = document.createElement('div');
      errorDiv.className = 'form-errors';
      errorDiv.innerHTML = userError;
      this.parentNode.insertBefore(errorDiv, this);
      
      return false;
    }
  });